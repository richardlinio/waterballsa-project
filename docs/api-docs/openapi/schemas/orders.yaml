CreateOrderRequest:
  type: object
  required:
    - items
  properties:
    items:
      type: array
      description: 要購買的項目列表
      minItems: 1
      items:
        type: object
        required:
          - journeyId
          - quantity
        properties:
          journeyId:
            type: integer
            description: 要購買的旅程 ID
            example: 17
          quantity:
            type: integer
            description: 購買數量
            minimum: 1
            default: 1
            example: 1

OrderResponse:
  type: object
  required:
    - id
    - orderNumber
    - userId
    - username
    - status
    - originalPrice
    - discount
    - price
    - items
    - createdAt
  properties:
    id:
      type: integer
      description: 訂單 ID
      example: 123
    orderNumber:
      type: string
      description: |
        唯一訂單編號，格式：{timestamp}{userId}{randomCode}
        範例：20251121011117cd5 = 2025112101（時間戳記）+ 11（使用者 ID）+ 17cd5（隨機碼）
      example: '20251121011117cd5'
    userId:
      type: integer
      description: 建立此訂單的使用者 ID
      example: 11
    username:
      type: string
      description: 訂單擁有者的使用者名稱
      example: 'john_doe'
    status:
      type: string
      enum:
        - UNPAID
        - PAID
        - EXPIRED
      description: |
        訂單狀態：
        - UNPAID: 訂單已建立但尚未付款
        - PAID: 付款完成，使用者擁有旅程存取權
        - EXPIRED: 訂單在 3 天後過期，無法付款
      example: 'UNPAID'
    originalPrice:
      type: number
      format: decimal
      description: 總原價（所有項目原價的總和）
      example: 7599.00
    discount:
      type: number
      format: decimal
      description: 總折扣金額
      example: 0.00
    price:
      type: number
      format: decimal
      description: 最終應付金額（originalPrice - discount）
      example: 7599.00
    items:
      type: array
      description: 訂單項目列表（要購買的旅程）
      items:
        $ref: '#/OrderItem'
    createdAt:
      type: integer
      format: int64
      description: 訂單建立時間戳記（自紀元以來的毫秒數）
      example: 1732420800000
    expiredAt:
      type: integer
      format: int64
      description: 訂單過期時間戳記（created_at + 3 天，若已付款則為 null）
      example: 1732680000000
      nullable: true
    paidAt:
      type: integer
      format: int64
      description: 付款完成時間戳記（若尚未付款則為 null）
      example: 1732507200000
      nullable: true

OrderItem:
  type: object
  required:
    - journeyId
    - journeyTitle
    - quantity
    - originalPrice
    - discount
    - price
  properties:
    journeyId:
      type: integer
      description: 旅程 ID
      example: 17
    journeyTitle:
      type: string
      description: 旅程標題（訂單建立時的快照）
      example: 'AI x BDD：規格驅動全自動開發術'
    quantity:
      type: integer
      description: 此旅程的數量（MVP 中永遠為 1）
      example: 1
    originalPrice:
      type: number
      format: decimal
      description: 訂單建立時的旅程價格（鎖定價格）
      example: 7599.00
    discount:
      type: number
      format: decimal
      description: 套用至此項目的折扣
      example: 0.00
    price:
      type: number
      format: decimal
      description: 此項目的最終價格（originalPrice - discount）
      example: 7599.00

PayOrderResponse:
  type: object
  required:
    - id
    - orderNumber
    - status
    - price
    - paidAt
    - message
  properties:
    id:
      type: integer
      description: 訂單 ID
      example: 123
    orderNumber:
      type: string
      description: 訂單編號
      example: '20251121011117cd5'
    status:
      type: string
      enum:
        - PAID
      description: 訂單狀態（成功付款後永遠為 PAID）
      example: 'PAID'
    price:
      type: number
      format: decimal
      description: 已付金額
      example: 7599.00
    paidAt:
      type: integer
      format: int64
      description: 付款完成時間戳記（自紀元以來的毫秒數）
      example: 1732507200000
    message:
      type: string
      description: 成功訊息
      example: '付款完成'

OrderListResponse:
  type: object
  required:
    - orders
    - pagination
  properties:
    orders:
      type: array
      description: 訂單摘要列表
      items:
        $ref: '#/OrderSummary'
    pagination:
      $ref: '#/Pagination'

OrderSummary:
  type: object
  required:
    - id
    - orderNumber
    - status
    - price
    - items
    - createdAt
  properties:
    id:
      type: integer
      description: 訂單 ID
      example: 123
    orderNumber:
      type: string
      description: 訂單編號
      example: '20251121011117cd5'
    status:
      type: string
      enum:
        - UNPAID
        - PAID
        - EXPIRED
      description: 訂單狀態
      example: 'UNPAID'
    price:
      type: number
      format: decimal
      description: 最終應付金額
      example: 7599.00
    items:
      type: array
      description: 簡化的訂單項目（用於列表顯示）
      items:
        $ref: '#/OrderItemSummary'
    createdAt:
      type: integer
      format: int64
      description: 訂單建立時間戳記
      example: 1732420800000
    expiredAt:
      type: integer
      format: int64
      description: 訂單過期時間戳記（created_at + 3 天，若已付款則為 null）
      example: 1732680000000
      nullable: true
    paidAt:
      type: integer
      format: int64
      description: 付款完成時間戳記（若未付款則為 null）
      example: 1732507200000
      nullable: true

OrderItemSummary:
  type: object
  required:
    - journeyId
    - journeyTitle
  properties:
    journeyId:
      type: integer
      description: 旅程 ID
      example: 17
    journeyTitle:
      type: string
      description: 旅程標題
      example: 'AI x BDD：規格驅動全自動開發術'

Pagination:
  type: object
  required:
    - page
    - limit
    - total
  properties:
    page:
      type: integer
      description: 目前頁碼（從 1 開始）
      example: 1
    limit:
      type: integer
      description: 每頁項目數量
      example: 20
    total:
      type: integer
      description: 項目總數
      example: 5
