list:
  get:
    tags:
      - Journeys
    summary: 取得旅程列表
    description: |
      回傳所有可用學習旅程的列表。

      **公開存取：**
      - 不需要身分驗證
      - 回傳旅程基本資訊，包括封面圖片、標題和描述

      **回應：**
      - 回傳所有未被軟刪除的旅程
      - 旅程按建立順序回傳（按時間順序）
    operationId: getJourneys
    responses:
      '200':
        description: 成功取得旅程列表
        content:
          application/json:
            schema:
              type: object
              required:
                - journeys
              properties:
                journeys:
                  type: array
                  items:
                    $ref: '../schemas/journeys.yaml#/JourneyListItem'
            examples:
              success:
                summary: 包含多個旅程的旅程列表
                value:
                  journeys:
                    - id: 1
                      slug: 'design-patterns-mastery'
                      title: '軟體設計模式精通之旅'
                      description: '用 C.A. 模式大大提昇系統思維能力'
                      coverImageUrl: 'https://example.com/cover1.jpg'
                      teacherName: '水球潘'
                      price: 3990
                    - id: 2
                      slug: 'web-development-intro'
                      title: 'Web 開發入門'
                      description: '從零開始學習網頁開發'
                      coverImageUrl: 'https://example.com/cover2.jpg'
                      teacherName: '林老師'
                      price: 2990

detail:
  get:
    tags:
      - Journeys
    summary: 取得旅程詳情
    description: |
      回傳特定旅程的詳細資訊，包括所有章節和任務。

      **公開存取：**
      - 不需要身分驗證
      - 任何人都可以查看旅程結構和任務標題

      **身分驗證（選填）：**
      - 如果提供 JWT 權杖，回應會包含已驗證使用者的任務狀態
      - 任務狀態顯示進度：UNCOMPLETED、COMPLETED 或 DELIVERED
      - 沒有身分驗證時，狀態欄位將為 null

      **回應結構：**
      - 旅程基本資訊
      - 章節列表及其任務
      - 每個任務包括：id、類型、標題、存取等級和狀態（如果已驗證）
      - 此端點不包含任務詳情（影片網址、時長、內容）（請使用任務詳情端點）

      **注意：**
      - 章節和任務按 order_index 排序
      - 任務存取等級：PUBLIC（任何人可查看）、AUTHENTICATED（需要登入）、PURCHASED（需要購買旅程）
      - 任務狀態從 user_mission_progress 資料表取得（如果沒有進度記錄則預設為 UNCOMPLETED）
    operationId: getJourneyDetail
    security:
      - bearerAuth: []
      - {}
    parameters:
      - name: journeyId
        in: path
        required: true
        description: 旅程 ID
        schema:
          type: integer
          example: 1
    responses:
      '200':
        description: 成功取得旅程詳情
        content:
          application/json:
            schema:
              $ref: '../schemas/journeys.yaml#/JourneyDetail'
            examples:
              authenticated:
                summary: 包含章節和任務的旅程（已驗證使用者）
                value:
                  id: 1
                  slug: 'design-patterns-mastery'
                  title: '軟體設計模式精通之旅'
                  description: '用 C.A. 模式大大提昇系統思維能力'
                  coverImageUrl: 'https://example.com/cover1.jpg'
                  teacherName: '水球潘'
                  price: 3990
                  chapters:
                    - id: 1
                      title: '課程介紹'
                      orderIndex: 1
                      missions:
                        - id: 1
                          type: 'VIDEO'
                          title: '這門課手把手帶你成為架構設計的高手'
                          accessLevel: 'PUBLIC'
                          orderIndex: 1
                          status: 'DELIVERED'
                        - id: 2
                          type: 'VIDEO'
                          title: '你該知道：在 AI 的時代下，只會下 prompt 絕對寫不出好 Code'
                          accessLevel: 'PUBLIC'
                          orderIndex: 2
                          status: 'COMPLETED'
                    - id: 2
                      title: '架構思維的 C.A. 模式'
                      orderIndex: 2
                      missions:
                        - id: 3
                          type: 'VIDEO'
                          title: '架構師該如何思考'
                          accessLevel: 'PURCHASED'
                          orderIndex: 1
                          status: 'UNCOMPLETED'
              unauthenticated:
                summary: 包含章節和任務的旅程（未驗證）
                value:
                  id: 1
                  slug: 'design-patterns-mastery'
                  title: '軟體設計模式精通之旅'
                  description: '用 C.A. 模式大大提昇系統思維能力'
                  coverImageUrl: 'https://example.com/cover1.jpg'
                  teacherName: '水球潘'
                  price: 3990
                  chapters:
                    - id: 1
                      title: '課程介紹'
                      orderIndex: 1
                      missions:
                        - id: 1
                          type: 'VIDEO'
                          title: '這門課手把手帶你成為架構設計的高手'
                          accessLevel: 'PUBLIC'
                          orderIndex: 1
                          status: null
                        - id: 2
                          type: 'VIDEO'
                          title: '你該知道：在 AI 的時代下，只會下 prompt 絕對寫不出好 Code'
                          accessLevel: 'PUBLIC'
                          orderIndex: 2
                          status: null
                    - id: 2
                      title: '架構思維的 C.A. 模式'
                      orderIndex: 2
                      missions:
                        - id: 3
                          type: 'VIDEO'
                          title: '架構師該如何思考'
                          accessLevel: 'PURCHASED'
                          orderIndex: 1
                          status: null
      '404':
        description: 找不到旅程
        content:
          application/json:
            schema:
              $ref: '../schemas/common.yaml#/ErrorResponse'
            examples:
              notFound:
                summary: 旅程不存在
                value:
                  error: '找不到旅程'
