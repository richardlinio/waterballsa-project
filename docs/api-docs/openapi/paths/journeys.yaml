list:
  get:
    tags:
      - Journeys
    summary: Get journey list
    description: |
      Returns a list of all available learning journeys.

      **Public Access:**
      - No authentication required
      - Returns journey basic information including cover image, title, and description

      **Response:**
      - Returns all journeys that are not soft-deleted
      - Journeys are returned in creation order ((chronologically)
    operationId: getJourneys
    responses:
      '200':
        description: Successfully retrieved journey list
        content:
          application/json:
            schema:
              type: object
              required:
                - journeys
              properties:
                journeys:
                  type: array
                  items:
                    $ref: '../schemas/journeys.yaml#/JourneyListItem'
            examples:
              success:
                summary: Journey list with multiple journeys
                value:
                  journeys:
                    - id: 1
                      slug: 'design-patterns-mastery'
                      title: '軟體設計模式精通之旅'
                      description: '用 C.A. 模式大大提昇系統思維能力'
                      coverImageUrl: 'https://example.com/cover1.jpg'
                      teacherName: '水球潘'
                    - id: 2
                      slug: 'web-development-intro'
                      title: 'Web 開發入門'
                      description: '從零開始學習網頁開發'
                      coverImageUrl: 'https://example.com/cover2.jpg'
                      teacherName: '林老師'

detail:
  get:
    tags:
      - Journeys
    summary: Get journey details
    description: |
      Returns detailed information about a specific journey, including all chapters and missions.

      **Public Access:**
      - No authentication required
      - Anyone can view journey structure and mission titles

      **Authentication (Optional):**
      - If JWT token is provided, response will include mission status for the authenticated user
      - Mission status shows progress: UNCOMPLETED, COMPLETED, or DELIVERED
      - Without authentication, status field will be null

      **Response Structure:**
      - Journey basic information
      - List of chapters with their missions
      - Each mission includes: id, type, title, access level, and status (if authenticated)
      - Mission details (video URLs, duration, content) are NOT included in this endpoint (use mission detail endpoint)

      **Note:**
      - Chapters and missions are ordered by their order_index
      - Mission access levels: PUBLIC (viewable by anyone), AUTHENTICATED (requires login), PURCHASED (requires journey purchase)
      - Mission status is retrieved from user_mission_progress table (defaults to UNCOMPLETED if no progress record exists)
    operationId: getJourneyDetail
    security:
      - bearerAuth: []
      - {}
    parameters:
      - name: journeyId
        in: path
        required: true
        description: Journey ID
        schema:
          type: integer
          example: 1
    responses:
      '200':
        description: Successfully retrieved journey details
        content:
          application/json:
            schema:
              $ref: '../schemas/journeys.yaml#/JourneyDetail'
            examples:
              authenticated:
                summary: Journey with chapters and missions (authenticated user)
                value:
                  id: 1
                  slug: 'design-patterns-mastery'
                  title: '軟體設計模式精通之旅'
                  description: '用 C.A. 模式大大提昇系統思維能力'
                  coverImageUrl: 'https://example.com/cover1.jpg'
                  teacherName: '水球潘'
                  chapters:
                    - id: 1
                      title: '課程介紹'
                      orderIndex: 1
                      missions:
                        - id: 1
                          type: 'VIDEO'
                          title: '這門課手把手帶你成為架構設計的高手'
                          accessLevel: 'PUBLIC'
                          orderIndex: 1
                          status: 'DELIVERED'
                        - id: 2
                          type: 'VIDEO'
                          title: '你該知道：在 AI 的時代下，只會下 prompt 絕對寫不出好 Code'
                          accessLevel: 'PUBLIC'
                          orderIndex: 2
                          status: 'COMPLETED'
                    - id: 2
                      title: '架構思維的 C.A. 模式'
                      orderIndex: 2
                      missions:
                        - id: 3
                          type: 'VIDEO'
                          title: '架構師該如何思考'
                          accessLevel: 'PURCHASED'
                          orderIndex: 1
                          status: 'UNCOMPLETED'
              unauthenticated:
                summary: Journey with chapters and missions (unauthenticated)
                value:
                  id: 1
                  slug: 'design-patterns-mastery'
                  title: '軟體設計模式精通之旅'
                  description: '用 C.A. 模式大大提昇系統思維能力'
                  coverImageUrl: 'https://example.com/cover1.jpg'
                  teacherName: '水球潘'
                  chapters:
                    - id: 1
                      title: '課程介紹'
                      orderIndex: 1
                      missions:
                        - id: 1
                          type: 'VIDEO'
                          title: '這門課手把手帶你成為架構設計的高手'
                          accessLevel: 'PUBLIC'
                          orderIndex: 1
                          status: null
                        - id: 2
                          type: 'VIDEO'
                          title: '你該知道：在 AI 的時代下，只會下 prompt 絕對寫不出好 Code'
                          accessLevel: 'PUBLIC'
                          orderIndex: 2
                          status: null
                    - id: 2
                      title: '架構思維的 C.A. 模式'
                      orderIndex: 2
                      missions:
                        - id: 3
                          type: 'VIDEO'
                          title: '架構師該如何思考'
                          accessLevel: 'PURCHASED'
                          orderIndex: 1
                          status: null
      '404':
        description: Journey not found
        content:
          application/json:
            schema:
              $ref: '../schemas/common.yaml#/ErrorResponse'
            examples:
              notFound:
                summary: Journey does not exist
                value:
                  error: 'Journey not found'
