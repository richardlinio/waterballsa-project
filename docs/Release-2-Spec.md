# Release 2 規格清單 v02

- Last update: 2025-11-24

## 必做規格

### 3. 購課模組

#### 3.1 課程購買入口

- 課程詳情頁面顯示課程購買按鈕
- 已購買課程：按鈕顯示為「繼續學習」，點擊後導向課程單元頁面
- 未購買課程：按鈕顯示為「立即加入課程」
- 錯誤處理：使用者未登入時，點擊購買按鈕導向登入頁面

#### 3.2 訂單建立

- 購買流程為「建立訂單 -> 完成支付 -> 購買完成」
- 使用者必須先登入才能進行購買流程
- 在「建立訂單」階段，點擊「建立訂單」按鈕後建立訂單，並進入「完成支付」階段
- 「立即支付」階段顯示訂單資訊
  - 訂單編號
    - 訂單編號格式：`{timestamp}{userId}{randomCode}`
    - 例如：`20251121011117cd5` = `2025112101`(時間戳) + `11`(使用者 ID) + `cd5`(隨機碼)
  - 使用者名稱
  - 課程名稱
  - 課程價格（鎖定建立當下的價格，不受後續課程調價影響）
  - 訂單狀態（未付款）
  - 建立時間
- 在「完成支付」階段，點擊「立即支付」按鈕後自動購買，並進入「購買完成」階段
- 購買完成階段顯示更新的訂單資訊
  - 訂單編號
  - 使用者名稱
  - 課程名稱
  - 課程價格（鎖定建立當下的價格，不受後續課程調價影響）
  - 付款金額
  - 訂單狀態（已購買）
  - 訂單建立時間
  - 付款時間
  - 「立即上課」按鈕
- 每次只能購買一門課程（一個訂單只包含一個課程項目）
- 使用者可以同時擁有多個未付款訂單
- 錯誤處理：
  - 使用者已購買該課程：顯示提示「你已經購買此課程」，不建立新訂單
  - 使用者已有該課程的未付款訂單：導向該訂單的付款頁面
  - 使用者只能進入自己的訂單頁面，無法查閱其他使用者訂單

#### 3.3 訂單狀態管理

- 訂單狀態有兩種：
  - **未付款**：訂單已建立但尚未付款
  - **已付款**：付款完成，使用者擁有課程存取權

#### 3.4 訂單列表與查詢

- 首頁側邊欄新增「訂單管理」項目
- 訂單列表顯示資訊：
  - 訂單編號
  - 課程名稱
  - 課程價格
  - 訂單狀態
- 使用者可以點擊訂單進入付款頁面

#### 3.5 課程權限控制

- 使用者購買課程後，該課程的所有單元全部解鎖
- 未購買課程的使用者遇到「需購買」層級的單元時：
  - 課程詳情頁面（章節單元列表）：顯示鎖定圖示
  - 點擊進入該單元時：影片播放器位置顯示「此為付費內容，請先購買課程」提示訊息

---

## 延後執行規格

### 3. 購課模組

#### 3.1 訂單管理進階功能

- 免費課程（price = 0）：點擊「立即學習」後在背景自動建立訂單並標記為已付款，使用者無感
- 訂單歷史頁面：查看所有訂單（包含已付款、已過期）
- 訂單取消功能：使用者可主動取消未付款訂單
- 批次購買功能：一次購買多門課程（購物車功能）
- 過期訂單：
  - 付款期限為訂單建立後 3 天（用於鎖定當下價格，避免課程漲價影響）
  - 過期處理：
    - 系統自動將超過付款期限的「未付款」訂單標記為「已過期」
    - 已過期訂單無法再進行付款
    - 使用者需要重新建立新訂單（以新的價格）

#### 3.2 優惠與促銷

- 折扣碼/優惠券系統
- 限時優惠價格

---

## Questions

3. 使用者只能選擇付款，或是放著不理？可以刪除訂單嗎？
2. 若使用者無法刪訂單，訂單有有效期限嗎？例如三天過期？
3. 過期後的訂單，使用者還看的到嗎？或是就直接不顯示給使用者？
4. 使用者購買後，是否有觀看期限？
5. 使用者是否可重複購買相同課程？或是買給其他使用者？
6. 現階段是否需要折扣碼功能？例如參加過水球老師演講的可獲得八折折扣碼
